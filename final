package abcd;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

// --- 1. ç™»å…¥è¦–çª—
class Id extends JFrame {
    private JTextField txtname;
    private JPasswordField txtpassword; // æ”¹ç”¨å¯†ç¢¼æ¡†æ›´å®‰å…¨

    Id() {
        setTitle("ç³»çµ±ç™»å…¥");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 280, 200);
        setLayout(null);

        JLabel name = new JLabel("å¸³è™Ÿ:");
        name.setBounds(50, 30, 50, 25);
        add(name);

        txtname = new JTextField();
        txtname.setBounds(110, 30, 120, 25);
        add(txtname);

        JLabel password = new JLabel("å¯†ç¢¼:");
        password.setBounds(50, 70, 50, 25);
        add(password);

        txtpassword = new JPasswordField();
        txtpassword.setBounds(110, 70, 120, 25);
        add(txtpassword);

        JButton btnlogin = new JButton("ç™»å…¥");
        btnlogin.setBounds(100, 120, 80, 25);
        add(btnlogin);

        btnlogin.addActionListener(e -> {
            String user = txtname.getText();
            String pass = new String(txtpassword.getPassword());
            if (user.equals("abcde") && pass.equals("12345")) {
                JOptionPane.showMessageDialog(null, "ç™»å…¥æˆåŠŸï¼");
                new InputWindow(); // è·³è½‰åˆ°è¼¸å…¥é é¢
                dispose();
            } else {
                JOptionPane.showMessageDialog(null, "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤", "éŒ¯èª¤", JOptionPane.ERROR_MESSAGE);
            }
        });

        setLocationRelativeTo(null);
        setVisible(true);
    }
}

// --- 2. å¥åº·è³‡æ–™è¼¸å…¥è¦–çª— ---
class InputWindow extends JFrame {
    private JTextField txtheight, txtweight;
    private JComboBox<String> exercise;

    public InputWindow() {
        setTitle("è³‡æ–™è¼¸å…¥");
        setBounds(100, 100, 320, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(null);

        addLabel("èº«é«˜(cm):", 40, 30);
        txtheight = new JTextField();
        txtheight.setBounds(130, 30, 100, 25);
        add(txtheight);

        addLabel("é«”é‡(kg):", 40, 70);
        txtweight = new JTextField();
        txtweight.setBounds(130, 70, 100, 25);
        add(txtweight);

        addLabel("é‹å‹•é‡:", 40, 110);
        String[] acts = {"1. è¼•åº¦", "2. ä¸­åº¦", "3. é‡åº¦"};
        exercise = new JComboBox<>(acts);
        exercise.setBounds(130, 110, 100, 25);
        add(exercise);

        JButton btnCalc = new JButton("è¨ˆç®—ä¸¦ç”¢å‡ºé£Ÿè­œ");
        btnCalc.setBounds(80, 180, 150, 35);
        add(btnCalc);

        btnCalc.addActionListener(e -> {
            try {
                double h = Double.parseDouble(txtheight.getText());
                double w = Double.parseDouble(txtweight.getText());
                int activity = exercise.getSelectedIndex() + 1;
                
                double bmi = w / ((h / 100) * (h / 100));
                String report = generateReport(bmi, activity);
                
                new ResultWindow(report); 
                dispose();
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, "è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—");
            }
        });

        setLocationRelativeTo(null);
        setVisible(true);
    }

    private void addLabel(String text, int x, int y) {
        JLabel l = new JLabel(text);
        l.setBounds(x, y, 80, 25);
        add(l);
    }

    private String generateReport(double bmi, int activity) {
        String res = String.format("æ‚¨çš„ BMI ç‚ºï¼š%.2f\n", bmi);
        if (bmi < 18.5) {
            res += "é«”å‹åˆ¤æ–·ï¼šéè¼•\n" + getUnderWeightMenu(activity);
        } else if (bmi < 24) {
            res += "é«”å‹åˆ¤æ–·ï¼šæ­£å¸¸\n" + getNormalMenu(activity);
        } else if (bmi < 27) {
            res += "é«”å‹åˆ¤æ–·ï¼šéé‡\n" + getOverWeightMenu(activity);
        } else {
            res += "é«”å‹åˆ¤æ–·ï¼šè‚¥èƒ–\n" + getObeseMenu(activity);
        }
        return res;
    }

    // é£Ÿè­œé‚è¼¯ (ä¿ç•™è‡ªä½ çš„åŸå§‹ç¨‹å¼)
    private String getNormalMenu(int act) {
        String s = "*å»ºè­°é£Ÿè­œ\næ—©é¤ï¼šè›‹é¤… + ç„¡ç³–è±†æ¼¿\nåˆé¤ï¼šä¾¿ç•¶ï¼ˆç™½é£¯1ç¢— + é›è…¿/æ’éª¨ + é’èœï¼‰\næ™šé¤ï¼šåœ°ç“œ1æ¢ + ç…è›‹ + ç‡™é’èœ\n";
        if (act == 3) s += "åŠ é¤ï¼šé‹å‹•å¾Œå¯åŠ ä¸€æ ¹é¦™è•‰æˆ–ä¸€æ¯ç‰›å¥¶";
        return s;
    }
    private String getOverWeightMenu(int act) {
        String s = "*å»ºè­°é£Ÿè­œ\næ—©é¤ï¼šå…¨éº¥åå¸1ç‰‡ + ç…è›‹ + ç„¡ç³–è±†æ¼¿\nåˆé¤ï¼šä¾¿ç•¶ï¼ˆé£¯å°‘ + æ»·é›è…¿ + é’èœ2æ¨£ï¼‰\næ™šé¤ï¼šæ»·å‘³ï¼ˆè±†ä¹¾ã€è›‹ã€æµ·å¸¶ï¼‰+ ç‡™é’èœ\n";
        if (act == 1) s += "æé†’ï¼šé¿å…å«ç³–é£²æ–™èˆ‡å®µå¤œ";
        return s;
    }
    private String getObeseMenu(int act) {
        return "*å»ºè­°é£Ÿè­œ\næ—©é¤ï¼šèŒ¶è‘‰è›‹2é¡† + é»‘å’–å•¡æˆ–ç„¡ç³–è±†æ¼¿\nåˆé¤ï¼šè‡ªåŠ©é¤ï¼ˆé£¯åŠç¢— + é›èƒ¸/ç™½åˆ‡é› + é’èœ2~3æ¨£ï¼‰\næ™šé¤ï¼šæ¸…æ¹¯ç«é‹ï¼ˆè”¬èœ + è±†è… + é›è‚‰ï¼‰\nğŸ’¥æ³¨æ„ï¼šé¿å…ç‚¸ç‰©ã€åŠ å·¥é£Ÿå“";
    }
    private String getUnderWeightMenu(int act) {
        String s = "*å»ºè­°é£Ÿè­œ\næ—©é¤ï¼šåšç‰‡åå¸ + é®®å¥¶æˆ–å¥¶èŒ¶\nåˆé¤ï¼šç™½é£¯1.5ç¢— + é›è…¿æˆ–æ’éª¨ + é’èœ\næ™šé¤ï¼šç¾©å¤§åˆ©éºµæˆ–å’–å“©é£¯ + æ¹¯å“\n";
        if (act >= 2) s += "åŠ é¤ï¼šä¸‹åˆå¯åŠ é»å¿ƒï¼ˆéºµåŒ…æˆ–é¦™è•‰ï¼‰";
        return s;
    }
}

// --- 3. çµæœé¡¯ç¤ºè¦–çª—
class ResultWindow extends JFrame {
    public ResultWindow(String content) {
        setTitle("å°ˆå±¬å¥åº·å»ºè­°");
        setBounds(100, 100, 380, 350);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        JTextArea resultArea = new JTextArea(content);
        resultArea.setEditable(false);
        // è¨­å®šå­—é«”èˆ‡æ¨£å¼è®“çµæœæ›´æ˜“è®€
        resultArea.setFont(new Font("å¾®è»Ÿæ­£é»‘é«”", Font.BOLD, 16));
        resultArea.setMargin(new Insets(20, 20, 20, 20));
        resultArea.setBackground(new Color(245, 250, 255)); 
        resultArea.setBackground(new Color(240, 255, 240)); // æ·¡ç¶ è‰²èƒŒæ™¯

        add(new JScrollPane(resultArea), BorderLayout.CENTER);

        JButton btnBack = new JButton("é‡æ–°è¨ˆç®—");
        btnBack.setPreferredSize(new Dimension(0, 40));
        add(btnBack, BorderLayout.SOUTH);

        btnBack.addActionListener(e -> {
            new InputWindow(); // å›åˆ°è¼¸å…¥é 
            dispose();
        });

        setLocationRelativeTo(null);
        setVisible(true);
    }
}

public class dddd {
    public static void main(String[] args) {
        // è¨­å®šç³»çµ±é è¨­é¢¨æ ¼
        try { UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); } catch (Exception e) {}
        new Id();
    }
}
