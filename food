package food;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

// --- 1. ç™»å…¥è¦–çª— ---
class id extends JFrame {
    private JTextField txtname, txtpassword;

    id() {
        setTitle("ç³»çµ±ç™»å…¥");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 300, 200);
        setLayout(null);

        JLabel lblName = new JLabel("å¸³è™Ÿ:");
        lblName.setBounds(50, 30, 50, 25);
        add(lblName);

        txtname = new JTextField("abcde");
        txtname.setBounds(110, 30, 120, 25);
        add(txtname);

        JLabel lblPass = new JLabel("å¯†ç¢¼:");
        lblPass.setBounds(50, 70, 50, 25);
        add(lblPass);

        txtpassword = new JPasswordField("12345");
        txtpassword.setBounds(110, 70, 120, 25);
        add(txtpassword);

        JButton btnLogin = new JButton("ç™»å…¥");
        btnLogin.setBounds(100, 115, 80, 30);
        add(btnLogin);

        btnLogin.addActionListener(e -> {
            if (txtname.getText().equals("abcde") && txtpassword.getText().equals("12345")) {
                new healthinput(); // é–‹å•Ÿè¼¸å…¥é 
                dispose(); // é—œé–‰ç™»å…¥é 
            } else {
                JOptionPane.showMessageDialog(null, "å¸³å¯†éŒ¯èª¤");
            }
        });
        setLocationRelativeTo(null);
        setVisible(true);
    }
}

// --- 2. å¥åº·è³‡æ–™è¼¸å…¥è¦–çª— ---
class healthinput extends JFrame {
    private JTextField txtH, txtW;
    private JComboBox<String> comboAct;

    public healthinput() {
        setTitle("è¼¸å…¥å¥åº·è³‡æ–™");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 320, 300);
        setLayout(null);

        JLabel lblH = new JLabel("èº«é«˜(cm):");
        lblH.setBounds(40, 30, 80, 25);
        add(lblH);
        txtH = new JTextField();
        txtH.setBounds(130, 30, 100, 25);
        add(txtH);

        JLabel lblW = new JLabel("é«”é‡(kg):");
        lblW.setBounds(40, 70, 80, 25);
        add(lblW);
        txtW = new JTextField();
        txtW.setBounds(130, 70, 100, 25);
        add(txtW);

        JLabel lblA = new JLabel("é‹å‹•é‡:");
        lblA.setBounds(40, 110, 80, 25);
        add(lblA);
        String[] options = {"è¼•åº¦ (ä¹…å)", "ä¸­åº¦ (é‹å‹•)", "é‡åº¦ (å“¡)"};
        comboAct = new JComboBox<>(options);
        comboAct.setBounds(130, 110, 120, 25);
        add(comboAct);

        JButton btnCalc = new JButton("ç”¢ç”Ÿå»ºè­°é£Ÿè­œ");
        btnCalc.setBounds(80, 180, 140, 35);
        add(btnCalc);

        btnCalc.addActionListener(e -> {
            try {
                double h = Double.parseDouble(txtH.getText());
                double w = Double.parseDouble(txtW.getText());
                int activity = comboAct.getSelectedIndex() + 1;
                
                // è¨ˆç®— BMI èˆ‡é‚è¼¯
                double bmi = w / ((h / 100) * (h / 100));
                String report = generateReport(bmi, activity);
                
                // --- è·³è½‰åˆ°æ–°è¦–çª— ---
                new ResultWindow(report); 
                dispose(); // é—œé–‰è¼¸å…¥é 
                
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, "è«‹è¼¸å…¥æœ‰æ•ˆæ•¸å­—");
            }
        });

        setLocationRelativeTo(null);
        setVisible(true);
    }

    private String generateReport(double bmi, int act) {
        StringBuilder sb = new StringBuilder();
        sb.append(String.format("æ‚¨çš„ BMI ç‚ºï¼š%.2f\n", bmi));
        if (bmi < 18.5) {
            sb.append("é«”å‹ï¼šéè¼•\nğŸ’¡å»ºè­°ï¼šæ—©é¤åšç‰‡åå¸ï¼Œä¸‹åˆåŠ é¤é»å¿ƒã€‚");
        } else if (bmi < 24) {
            sb.append("é«”å‹ï¼šæ­£å¸¸\nğŸ’¡å»ºè­°ï¼šç¶­æŒç¾ç‹€ï¼Œæ³¨æ„ç‡Ÿé¤Šå‡è¡¡ã€‚");
        } else if (bmi < 27) {
            sb.append("é«”å‹ï¼šéé‡\nğŸ’¡å»ºè­°ï¼šå°‘æ²¹å°‘é¹½ï¼Œå¢åŠ æœ‰æ°§é‹å‹•ã€‚");
        } else {
            sb.append("é«”å‹ï¼šè‚¥èƒ–\nğŸ’¡å»ºè­°ï¼šæˆ’æ‰ç‚¸ç‰©èˆ‡å«ç³–é£²æ–™ï¼");
        }
        return sb.toString();
    }
}

// --- 3. çµæœé¡¯ç¤ºè¦–çª— (é€™å°±æ˜¯ä½ è¦çš„æ–°é é¢) ---
class ResultWindow extends JFrame {
    public ResultWindow(String content) {
        setTitle("å°ˆå±¬å¥åº·å»ºè­°");
        setBounds(100, 100, 350, 300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        JTextArea resultArea = new JTextArea(content);
        resultArea.setEditable(false);
        resultArea.setFont(new Font("å¾®è»Ÿæ­£é»‘é«”", Font.BOLD, 16));
        resultArea.setMargin(new Insets(20, 20, 20, 20));
        resultArea.setBackground(new Color(240, 255, 240)); // æ·¡ç¶ è‰²èƒŒæ™¯

        add(new JScrollPane(resultArea), BorderLayout.CENTER);

        JButton btnBack = new JButton("é‡æ–°è¨ˆç®—");
        add(btnBack, BorderLayout.SOUTH);

        btnBack.addActionListener(e -> {
            new healthinput(); // å›åˆ°è¼¸å…¥é 
            dispose(); // é—œé–‰çµæœé 
        });

        setLocationRelativeTo(null);
        setVisible(true);
    }
}

public class bmi {
    public static void main(String[] args) {
        new id();
    }
}
